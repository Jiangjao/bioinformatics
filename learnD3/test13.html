<!DOCTYPE html>
<head>

    <title>123</title>
    <style type="text/css">
        div {
        border : 1px solid black;
        }
        div > ul {
        visibility: hidden;
        opacity: 0;
        transition : visibility 2s, opacity 0.6s linear;
        }
        div:hover > ul {
        visibility : visible;
        opacity : 1;
        }
    </style>
</head>
<body>
    <div>
            <div id="divTest">
        <ul>
        <li> Apple </li>
        <li> Banana </li>
        <li> Mango </li>
        </ul>
    </div>
    </div>

</body>
<script>
    // utill
    var log = console.log.bind(console);

    function insertAfter(newElement, targetElement){
        var parent = targetElement.parentNode;
        console.log(parent)
        // what the meaning of equals?
        if(parent.lastChild == targetElement){
            parent.appendChild(newElement);
        }else{
            parent.insertBefore(newElement,targetElement.nextsibling);
        }
    }

    var divTest = document.getElementById("divTest") 

    let newElement = document.createElement("ul");
    newElement.setAttribute("class","test1")

    insertAfter(newElement, divTest)

    // create new list[50], and add to ul
    // addEventListener compare to onclick?
    for (let i = 1; i <= 50; i++) { 
        let newList = document.createElement("li");
        newList.setAttribute("class","test1")
        newList.innerHTML = i
        // add li to ul tag
        newElement.append(newList)
        // newList.onclick = function(){
        //     this.innerHTML = "YOU CLICKED ME!";
        //     if(this.style.backgroundColor == ''){
        //         this.style.backgroundColor = 'blue';
        //     }else{
        //         this.style.backgroundColor = '';
        //         // this.innerHTML = "YOU CLICKED ME!";
        //     }
        // }
        // newList.addEventListener("onclick", function(){
        //     this.innerHTML = "YOU CLICKED ME!";
        //     this.style.backgroundColor = "blue";
        //     if(this.style.backgroundColor == ''){
        //         this.style.backgroundColor = 'blue';
        //     }else{
        //         this.style.backgroundColor = '';
        //         // this.innerHTML = "YOU CLICKED ME!";
        //     }
        // });
    }
    // newElement.addEventListener("click", function(){
    //     console.log("hello")
    //     // this.innerHTML = "YOU CLICKED ME!";
    //     if(this.style.backgroundColor == ''){
    //         this.style.backgroundColor = 'blue';
    //     }else{
    //         this.style.backgroundColor = '';
    //         // this.innerHTML = "YOU CLICKED ME!";
    //     }
    // }, false)

    // Event Agent
    newElement.onclick = function (e) {
        e = e || window.event; //这一行及下一行是为兼容IE8及以下版本
        var target = e.target || e.srcElement;
        if (target.tagName.toLowerCase() === "li") {
            var li = this.querySelectorAll("li");
            index = Array.prototype.indexOf.call(li, target);
            // log(index)
            // log(li[index])
            // alert(target.innerHTML + index);
            if(li[index].style.backgroundColor == ''){
                li[index].style.backgroundColor = 'blue';
                li[index].innerHTML = "YOU CLICKED ME!";
            } else {
                li[index].style.backgroundColor = '';
                li[index].innerHTML = index + 1;
            // this.innerHTML = "YOU CLICKED ME!";
            }
        }
    }
</script>

</html>